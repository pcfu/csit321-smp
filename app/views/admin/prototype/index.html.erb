<% content_for :assets do %>
  <%= javascript_pack_tag 'admin/prototype/index', 'data-turbolinks-track': 'reload' %>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="my-5 text-center">
        <button id="training-button" class="btn btn-primary">Train</button>
        <button id="prediction-button" class="btn btn-primary ms-5">Predict</button>
      </div>

      <h2>Model Training Status</h2>
      <div class="mt-3 mb-5">
        <table id="model-config-table" class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Model Name</th>
              <th scope="col">Training Progress</th>
              <th scope="col">Updated At</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td scope="col"><%= @config.name %></th>
              <td scope="col"><%= @config.train_percent %></th>
              <td scope="col"><%= @config.updated_at.strftime("%Y-%m-%d %H:%M:%S.%3N") %></th>
            </tr>
          </tbody>
        </table>
      </div>

      <h2>Latest Predictions</h2>
      <div class="my-3">
        <table id="predictions-table" class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Stock</th>
              <th scope="col">Entry Date</th>
              <th scope="col">Next Day</th>
              <th scope="col">ND Max</th>
              <th scope="col">ND Exp</th>
              <th scope="col">ND Min</th>
              <th scope="col">Short Term</th>
              <th scope="col">ST Max</th>
              <th scope="col">ST Exp</th>
              <th scope="col">ST Min</th>
            </tr>
          </thead>
          <tbody>
            <% @predictions.each do |p| %>
              <tr>
                <td><%= p.stock.symbol %></td>
                <td><%= p.entry_date %></td>
                <td><%= p.nd_date %></td>
                <td><%= p.nd_max_price.to_f.round(3) %></td>
                <td><%= p.nd_exp_price.to_f.round(3) %></td>
                <td><%= p.nd_min_price.to_f.round(3) %></td>
                <td><%= p.st_date %></td>
                <td><%= p.st_max_price.to_f.round(3) %></td>
                <td><%= p.st_exp_price.to_f.round(3) %></td>
                <td><%= p.st_min_price.to_f.round(3) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
