<script>
$(document).ready(function () {

    $('#n_estimators').hide();
    $('#max_depth').hide();
    $('#max_features').hide();
    $('#criterion').hide();
    $('#c').hide();
    $('#gamma').hide();
    $('#kernel').hide();
    $('#model_type').on("change",function(){

      if (($('#model_type option:selected').val()) == "lstm"){
        $('#n_estimators').hide();
        $('#max_depth').hide();
        $('#max_features').hide();
        $('#criterion').hide();
        $('#c').hide();
        $('#gamma').hide();
        $('#kernel').hide();
      } else if(($('#model_type option:selected').val()) == "rf"){
        $('#n_estimators').show();
        $('#max_depth').show();
        $('#max_features').show();
        $('#criterion').show();
        $('#c').hide();
        $('#gamma').hide();
        $('#kernel').hide();
      }else{
        $('#n_estimators').hide();
        $('#max_depth').hide();
        $('#c').show();
        $('#gamma').show();
        $('#kernel').show();
      }
    
        
     });
})



</script>

<div class="container" style="margin-bottom: 20px">
  <h1>Model Training Parameters</h1>
  <h2>Add New Model</h2>
  <hr/>

  <% if flash[:error].present? %>
    <div class="alert alert-danger"><%= flash[:error] %></div>
  <% end %>
  <% if flash[:success].present? %>
    <div class="alert alert-success"><%= flash[:success] %></div>
  <% end %>

  <%= form_with model: @ml_params, method: :post, url: admin_model_parameters_path, local: true do |f| %>
    <div class = "mb-3">
      <%= f.label :name, class: "form-label" %>
      <%= f.text_field :name, required: true, class: "form-control" %>
    </div>

    <div class = "mb-3">
    <%= f.label :start_date, class: "form-label" %>
    <%= f.date_field :start_date, required: true, class: "form-control" %>
    </div>

    <div class = "mb-3">
    <%= f.label :train_test_percent, class: "form-label" %>
    <%= f.number_field :train_test_percent, :step => 0.01, required: true, class: "form-control"%>
    </div>


    <div class="mb-3" id="model_type">
      <%= f.label :model_type, class: "form-label" %><br>
      <%= f.select :model_type, ModelConfig.model_types.keys, {}, {required: true, class: "form-control"}%>
      
    </div>

    <div class="mb-3" id="n_estimators">
      <%= f.label :n_estimators, class: "form-label" %><br>
      <%=
      f.select(:n_estimators,
              [['20',20],['50',50],['70',70],['100',100],
              ['150',150],['180',180],['200',200]],
              { },
              {:multiple => true,class: "form-control"})
      %>
    </div>

    <div class="mb-3" id="max_depth">
      <%= f.label :max_depth, class: "form-label" %><br>
      <%=
      f.select(:max_depth,
              [['3',3],['4',4],['5',5],['6',6],['7',7],
              ['8',8],['9',9],['10',10],['11',11],['12',12],
              ['13',13],['14',14]],
              { },
              { :multiple => true,class: "form-control"})
      %>
    </div>

    <div class="mb-3" id="max_features">
      <%= f.label :max_features, class: "form-label" %><br>
      <%=
      f.select(:max_features,
              [['auto','auto'],['sqrt','sqrt'],['log2','log2']],
              { },
              { :multiple => true,class: "form-control"})
      %>
    </div>
    
    <div class="mb-3" id="criterion">
    <%= f.label :criterion, class: "form-label" %><br>
    <%=
    f.select(:criterion,
            [['gini','gini'],['entropy','entropy']],
            { },
            { :multiple => true,class: "form-control"})
    %>
  </div>   

    <div class="mb-3" id="c">
      <%= f.label :c, class: "form-label" %><br>
      <%=
      f.select(:c,
              [['1',1],['2',2],['3',3],['4',4],['5',5],
              ['6',6],['7',7],['8',8],['9',9],['10',10]],
              { },
              { :multiple => true,class: "form-control"})
      %>
    </div>

    <div class="mb-3" id="gamma">
    <%= f.label :gamma, class: "form-label" %><br>
    <%=
    f.select(:gamma,
            [['1',1],['2',2],['3',3],['4',4],['5',5],
            ['6',6],['7',7],['8',8],['9',9],['10',10],
            ['11',11],['12',12],['13',13],['14',14],['15',15]],
            { },
            {:multiple => true,class: "form-control"})
    %>
  </div>

  <div class="mb-3" id="kernel">
    <%= f.label :kernel, class: "form-label" %><br>
    <%=
    f.select(:kernel,
            [['Linear','linear'],['Poly','poly'],['RBF','rbf'],
            ['Sigmoid','sigmoid'], ['Precomputed','precomputed']],
            { },
            { :multiple => true,class: "form-control"})
    %>
  </div>

    <%= link_to "Back", admin_model_parameters_path, class: 'btn btn-danger col-1' %>
    <%= f.submit :"Submit", class: "btn btn-primary col-1" %>

    <% if local_assigns.has_key? :status_msg %>
      <p><%= status_msg %></p>
    <% end %>
  <% end %>
</div>
